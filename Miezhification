#!/bin/bash

if ! command -v eix &> /dev/null; then
    echo "Error: eix is not installed." >&2
    exit 1
fi

total=$(eix --installed --only-names | wc -l)
from_miezhiko=$(eix --installed --in-overlay Miezhiko --only-names | wc -l)

if [ "$total" -eq 0 ]; then
    echo "No installed packages found."
    exit 0
fi

percentage=$(awk "BEGIN {printf \"%.2f\", ($from_miezhiko / $total) * 100}")

echo "Total installed packages: $total"
echo "Packages from ::Miezhiko: $from_miezhiko"
echo "Percentage from ::Miezhiko: ${percentage}%"
